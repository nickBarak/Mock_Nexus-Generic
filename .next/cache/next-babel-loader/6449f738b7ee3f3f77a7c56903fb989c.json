{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\nicho\\\\Code\\\\Portfolio\\\\mock_nexus\\\\pages\\\\authors\\\\[id].js\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport ArticleDisplay from '../../components/ArticleDisplay';\nimport Layout from \"../../layouts\";\nexport var __N_SSG = true;\nexport default (function (_ref) {\n  var author = _ref.author,\n      articles = _ref.articles,\n      categories = _ref.categories;\n  return __jsx(Layout, {\n    categories: categories,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 54\n    }\n  }, __jsx(ArticleDisplay, {\n    type: \"author-page\",\n    heading: author,\n    articles: articles,\n    page: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 1\n    }\n  }));\n});","map":{"version":3,"sources":["C:/Users/nicho/Code/Portfolio/mock_nexus/pages/authors/[id].js"],"names":["ArticleDisplay","Layout","author","articles","categories"],"mappings":";;;;;AACA,OAAOA,cAAP,MAA2B,iCAA3B;AACA,OAAOC,MAAP,MAAmB,eAAnB;;AAgBA,gBAAe;AAAA,MAAGC,MAAH,QAAGA,MAAH;AAAA,MAAWC,QAAX,QAAWA,QAAX;AAAA,MAAqBC,UAArB,QAAqBA,UAArB;AAAA,SAAsC,MAAC,MAAD;AAAQ,IAAA,UAAU,EAAEA,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACrD,MAAC,cAAD;AAAgB,IAAA,IAAI,EAAC,aAArB;AAAmC,IAAA,OAAO,EAAEF,MAA5C;AAAoD,IAAA,QAAQ,EAAEC,QAA9D;AAAwE,IAAA,IAAI,EAAE,CAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADqD,CAAtC;AAAA,CAAf","sourcesContent":["import { queryDB, getCategories } from \"../../db\";\r\nimport ArticleDisplay from '../../components/ArticleDisplay';\r\nimport Layout from \"../../layouts\";\r\n\r\nexport async function getStaticPaths() {\r\n    let ids = await queryDB('SELECT id FROM authors'),\r\n        paths = ids.map(id => ({ params: { id: String(id.id) } }));\r\n\r\n    return { paths, fallback: false }\r\n}\r\n\r\nexport async function getStaticProps({ params: { id } }) {\r\n    let [author] = await queryDB('SELECT * FROM authors WHERE id = $1', [id]),\r\n        articles = await queryDB(\"SELECT * FROM articles WHERE author = $1 ORDER BY publish_date\", [JSON.stringify({ \"id\": Number(id), \"name\": author.name })]);\r\n\r\n    return { props: JSON.parse(JSON.stringify({ author: author.name, articles, categories: await getCategories() })) }\r\n}\r\n\r\nexport default ({ author, articles, categories }) => <Layout categories={categories}>\r\n<ArticleDisplay type=\"author-page\" heading={author} articles={articles} page={1} />\r\n</Layout>"]},"metadata":{},"sourceType":"module"}