{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport { convertToPath, convertDate } from '../Functions';\nimport 'isomorphic-unfetch';\nimport { useState } from 'react';\nconst categories = [{\n  \"title\": \"Artsweek\",\n  \"subcategories\": [\"Feature\", \"Film and TV\", \"Literature\", \"Music\", \"Performing Art\", \"Previews: What's Going On\", \"Visual Art\"]\n}, {\n  \"title\": \"Labyrinth\",\n  \"link\": \"/categories/labyrinth\"\n}, {\n  \"title\": \"Multimedia\",\n  \"subcategories\": [\"Comics\", \"Photo\", \"Video\"]\n}, {\n  \"title\": \"News\",\n  \"subcategories\": [\"Campus\", \"County\", \"Crime\", \"Feature\", \"Isla Vista\", \"Student Gov\", \"UC News\", \"UCSB COLA Movement\"]\n}, {\n  \"title\": \"Nexustentialism\",\n  \"link\": \"/categories/nexustentialism\"\n}, {\n  \"title\": \"On the Menu\",\n  \"subcategories\": [\"Coffee Column\", \"First Bites\", \"Meal Prep Mondays\", \"On the Road\", \"Recipes\", \"The Beet\"]\n}, {\n  \"title\": \"Opinion\",\n  \"subcategories\": [\"Argument in the Office\", \"Ask AJ\", \"Flesh Prison\", \"Global Gauchos\", \"Hyphenated American\", \"Letters to the Editor\", \"Living\", \"Politics\", \"Therapeutic Thoughts\", \"Virtual Reality\", \"Wednesday Hump\"]\n}, {\n  \"title\": \"Science & Tech\",\n  \"subcategories\": [\"Health & Wellness\"]\n}, {\n  \"title\": \"Sports\",\n  \"subcategories\": [\"Baseball\", \"Basketball\", \"Columns/Features\", \"Cross Country\", \"Golf\", \"Soccer\", \"Softball\",\n  /*\"Sports Blogs\",*/\n  \"Swim and Dive\", \"Tennis\", \"Track and Field\", \"Volleyball\", \"Water Polo\"]\n}];\n\nfunction Nav() {\n  const {\n    0: searchResults,\n    1: setSearchResults\n  } = useState([[], []]);\n  const {\n    0: searchError,\n    1: setSearchError\n  } = useState(null);\n  const {\n    0: queryTime,\n    1: setQueryTime\n  } = useState(0);\n  const {\n    0: sortBy,\n    1: setSortBy\n  } = useState(0);\n  const {\n    0: loadingSearchResults,\n    1: setLoadingSearchResults\n  } = useState(false);\n  const {\n    0: modalPage,\n    1: setModalPage\n  } = useState(1);\n  const {\n    0: modalPageSet,\n    1: setModalPageSet\n  } = useState(0);\n  const timeouts = [];\n  return __jsx(\"div\", {\n    className: \"jsx-87696297\"\n  }, __jsx(\"ul\", {\n    className: \"jsx-87696297\" + \" \" + \"nav\"\n  }, [...categories, {\n    title: 'About',\n    subcategories: [{\n      Advertising: 'advertising'\n    }, {\n      Classifieds: 'classified-ads'\n    }, {\n      Donate: 'donate'\n    }, {\n      FAQ: 'faq'\n    }, {\n      \"Staff/Contact\": 'staff-contact'\n    }]\n  }].map((category, i) => __jsx(\"li\", {\n    key: i,\n    className: \"jsx-87696297\"\n  }, category.subcategories ? __jsx(React.Fragment, null, __jsx(Link, {\n    href: `/categories/${category.title.toLowerCase().replace(/ /g, '-')}`\n  }, __jsx(\"a\", {\n    onMouseOver: e => {\n      timeouts[i] && clearTimeout(timeouts[i]);\n      let {\n        style\n      } = e.currentTarget.parentElement.children[1];\n      style.opacity = 1;\n      style.pointerEvents = 'auto';\n    },\n    onMouseOut: e => {\n      let {\n        style\n      } = e.currentTarget.parentElement.children[1];\n      timeouts[i] = setTimeout(_ => {\n        style.opacity = 0;\n        style.pointerEvents = 'none';\n      }, 0);\n    },\n    className: \"jsx-87696297\"\n  }, category.title)), __jsx(\"ul\", {\n    onMouseMove: _ => timeouts[i] && clearTimeout(timeouts[i]),\n    onMouseOut: e => {\n      let {\n        style\n      } = e.currentTarget;\n      timeouts[i] = setTimeout(_ => {\n        style.opacity = 0;\n        style.pointerEvents = 'none';\n      }, 0);\n    },\n    className: \"jsx-87696297\" + \" \" + \"nav-subcategories\"\n  }, category.subcategories.map((subcategory, j) => __jsx(\"li\", {\n    key: j,\n    className: \"jsx-87696297\"\n  }, __jsx(Link, {\n    href: category.title !== 'About' ? `/categories/${convertToPath(category.title)}/${convertToPath(subcategory)}` : `/about/${Object.values(subcategory)[0]}`\n  }, __jsx(\"a\", {\n    className: \"jsx-87696297\" + \" \" + \"subcategory-link\"\n  }, category.title !== 'About' ? subcategory : Object.keys(subcategory)[0])))))) : __jsx(Link, {\n    href: category.link\n  }, __jsx(\"a\", {\n    className: \"jsx-87696297\"\n  }, category.title)))), __jsx(\"li\", {\n    key: \"-2\",\n    style: {\n      position: 'relative',\n      textTransform: 'none'\n    },\n    className: \"jsx-87696297\"\n  }, __jsx(\"i\", {\n    onClick: e => {\n      let {\n        style\n      } = e.currentTarget.parentElement.children[1];\n      style.display = style.display === 'none' ? 'block' : 'none';\n    },\n    className: \"jsx-87696297\" + \" \" + \"search fas fa-search\"\n  }), __jsx(\"input\", {\n    type: \"text\",\n    placeholder: \"Looking for something?\",\n    style: {\n      display: 'none',\n      position: 'absolute',\n      right: '150%',\n      top: '-15%',\n      padding: '.2rem .4rem'\n    },\n    onKeyDown: e => {\n      e.persist();\n      e.keyCode === 13 && (_ => {\n        let now = Date.now();\n        setLoadingSearchResults(true);\n        fetch('http://localhost:3000/api/search?value=' + e.target.value).then(res => res.json()).then(rows => setSearchResults([rows, [...rows].sort(({\n          publish_date: a\n        }, {\n          publish_date: b\n        }) => new Date(b) - new Date(a))]) || setLoadingSearchResults(false) || setQueryTime(((Date.now() - now) / 1000).toFixed(2))).catch(e => console.log(e) || setSearchError('Error fetching results'));\n        let {\n          style\n        } = document.getElementsByClassName('search-results')[0];\n        document.getElementsByClassName('modal-open')[0].style.opacity = '.75';\n        document.getElementsByClassName('modal-open')[0].style.pointerEvents = 'auto';\n        document.body.style.overflow = 'hidden';\n        style.pointerEvents = 'auto';\n        style.opacity = 1;\n        e.target.value = '';\n      })();\n    },\n    className: \"jsx-87696297\"\n  }))), __jsx(\"div\", {\n    className: \"jsx-87696297\" + \" \" + \"search-results\"\n  }, __jsx(\"button\", {\n    onClick: e => {\n      let {\n        style\n      } = document.getElementsByClassName('search-results')[0];\n      style.opacity = 0;\n      style.pointerEvents = 'none';\n      document.getElementsByClassName('modal-open')[0].style.opacity = 0;\n      document.getElementsByClassName('modal-open')[0].style.pointerEvents = 'none';\n      document.body.style.overflow = 'visible';\n      setSearchResults([[], []]);\n      setSearchError(null);\n      setModalPage(1);\n      setModalPageSet(0);\n      setSortBy(0);\n      setQueryTime(0);\n      e.target.parentElement.children[2].children[1].children[1].selectedIndex = 0;\n    },\n    className: \"jsx-87696297\" + \" \" + \"search-results-button\"\n  }, \"x\"), __jsx(\"div\", {\n    style: {\n      color: 'red',\n      fontWeight: 'bold',\n      fontSize: '1.1rem'\n    },\n    className: \"jsx-87696297\"\n  }, searchError), __jsx(\"div\", {\n    className: \"jsx-87696297\" + \" \" + \"search-results-header\"\n  }, __jsx(\"span\", {\n    style: {\n      fontFamily: 'Arial, sans-serif',\n      fontSize: '.85rem'\n    },\n    className: \"jsx-87696297\"\n  }, !loadingSearchResults ? `${searchResults[0].length} result${searchResults[0].length === 1 ? '' : 's'} (${queryTime} second${queryTime === 1 ? '' : 's'})` : 'Loading articles...'), __jsx(\"span\", {\n    className: \"jsx-87696297\"\n  }, __jsx(\"span\", {\n    style: {\n      fontSize: '.85rem',\n      marginRight: '.25rem'\n    },\n    className: \"jsx-87696297\"\n  }, \"Sort by: \"), __jsx(\"select\", {\n    onChange: e => console.log(e.target.selectedIndex) || setSortBy(e.target.selectedIndex),\n    style: {\n      fontFamily: 'Arial, sans-serif'\n    },\n    className: \"jsx-87696297\"\n  }, __jsx(\"option\", {\n    key: \"0\",\n    className: \"jsx-87696297\"\n  }, \"Relevance\"), __jsx(\"option\", {\n    key: \"1\",\n    className: \"jsx-87696297\"\n  }, \"Date\")))), __jsx(\"ul\", {\n    style: {\n      position: 'relative',\n      maxHeight: 'calc(100% - 2.25rem - 1.13px - 1.5rem - 2.25rem)',\n      overflowY: 'auto'\n    },\n    className: \"jsx-87696297\"\n  }, searchResults[sortBy].slice((modalPage - 1) * 10, modalPage * 10).map((result, i) => __jsx(\"li\", {\n    key: i,\n    style: {\n      marginBottom: '.5rem'\n    },\n    className: \"jsx-87696297\"\n  }, __jsx(\"div\", {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    },\n    className: \"jsx-87696297\"\n  }, __jsx(Link, {\n    href: '/articles/' + result.id\n  }, __jsx(\"a\", {\n    style: {\n      color: '#0000CC',\n      fontSize: '1rem',\n      fontFamily: 'Arial, sans-serif'\n    },\n    className: \"jsx-87696297\"\n  }, result.title))), __jsx(\"div\", {\n    style: {\n      color: '#008000',\n      fontSize: '13px',\n      fontFamily: 'Arial, sans-serif',\n      margin: '.2rem 0'\n    },\n    className: \"jsx-87696297\"\n  }, `http://localhost:3000/articles/${result.id}`), __jsx(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    className: \"jsx-87696297\"\n  }, __jsx(Link, {\n    href: `http://localhost:3000/articles/${result.id}`\n  }, __jsx(\"a\", {\n    className: \"jsx-87696297\"\n  }, __jsx(\"picture\", {\n    className: \"jsx-87696297\"\n  }, __jsx(\"source\", {\n    srcSet: result.mobile_thumbnail,\n    className: \"jsx-87696297\"\n  }), __jsx(\"source\", {\n    srcSet: '/img/nexus-fallback.webp',\n    type: \"image/webp\",\n    className: \"jsx-87696297\"\n  }), __jsx(\"img\", {\n    alt: \"thumbnail\",\n    className: \"jsx-87696297\"\n  })))), __jsx(\"span\", {\n    style: {\n      fontSize: '13px',\n      fontFamily: 'Arial, sans-serif',\n      margin: '0 .5rem'\n    },\n    className: \"jsx-87696297\"\n  }, __jsx(\"span\", {\n    style: {\n      fontSize: '13px',\n      fontFamily: 'Arial, sans-serif'\n    },\n    className: \"jsx-87696297\"\n  }, convertDate(result.publish_date), \" ... \"), result.description && result.description.slice(0, 300) + (result.description.length > 300 ? '...' : '')))))), __jsx(\"ul\", {\n    style: {\n      marginTop: '1.25rem',\n      display: 'flex',\n      width: '100%',\n      overflowX: 'auto',\n      fontFamily: 'Arial, sans-serif'\n    },\n    className: \"jsx-87696297\"\n  }, modalPageSet > 0 && __jsx(\"li\", {\n    key: \"-1\",\n    onClick: _ => setModalPageSet(modalPageSet - 1),\n    onMouseOver: e => {\n      e.target.style.textDecoration = 'underline';\n    },\n    onMouseOut: e => {\n      e.target.style.textDecoration = 'none';\n    },\n    style: {\n      color: '#c0c0c0',\n      margin: '0 .25rem',\n      cursor: 'pointer',\n      display: 'flex',\n      alignItems: 'flex-end',\n      fontFamily: 'Arial, sans-serif'\n    },\n    className: \"jsx-87696297\"\n  }, \"...\"), new Array(Math.min(25, Math.ceil(searchResults[0].length / 10) - 25 * modalPageSet)).fill(true).map((_, i) => {\n    let page = modalPageSet * 25 + i + 1;\n    return __jsx(\"li\", {\n      key: i,\n      onClick: _ => setModalPage(page),\n      onMouseOver: e => {\n        e.target.style.textDecoration = 'underline';\n      },\n      onMouseOut: e => {\n        e.target.style.textDecoration = 'none';\n      },\n      style: {\n        color: modalPage === page ? '#666' : '#c0c0c0',\n        margin: '0 .25rem',\n        cursor: 'pointer',\n        fontSize: modalPage === page ? '.95rem' : '.8rem',\n        display: 'flex',\n        alignItems: 'flex-end',\n        fontFamily: 'Arial, sans-serif'\n      },\n      className: \"jsx-87696297\"\n    }, page);\n  }), Math.ceil(searchResults[0].length / 10) - 25 * modalPageSet > 25 && __jsx(\"li\", {\n    key: \"25\",\n    onClick: _ => setModalPageSet(modalPageSet + 1),\n    onMouseOver: e => {\n      e.target.style.textDecoration = 'underline';\n    },\n    onMouseOut: e => {\n      e.target.style.textDecoration = 'none';\n    },\n    style: {\n      color: '#c0c0c0',\n      margin: '0 .25rem',\n      cursor: 'pointer',\n      display: 'flex',\n      alignItems: 'flex-end',\n      fontFamily: 'Arial, sans-serif'\n    },\n    className: \"jsx-87696297\"\n  }, \"...\"))), __jsx(\"div\", {\n    className: \"jsx-87696297\" + \" \" + \"modal-open\"\n  }), __jsx(_JSXStyle, {\n    id: \"87696297\"\n  }, [\".nav.jsx-87696297{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3rem;text-transform:uppercase;}\", \".nav.jsx-87696297 li.jsx-87696297{position:relative;}\", \".nav.jsx-87696297 li.jsx-87696297:hover ul.jsx-87696297{max-height:1000px;}\", \"a.jsx-87696297{color:black;font-family:Lato,sans-serif;}\", \"a.jsx-87696297:hover{color:var(--link-hover);}\", \".nav-subcategories.jsx-87696297{padding:1.25rem .6rem .5rem .6rem;font-weight:300;background-color:#fff;opacity:0;pointer-events:none;position:absolute;top:85%;-webkit-transition:opacity 250ms ease-in;transition:opacity 250ms ease-in;font-size:15px;z-index:5;}\", \".nav-subcategories.jsx-87696297 li.jsx-87696297{margin-top:7px;cursor:pointer;}\", \".nav-subcategories.jsx-87696297 li.jsx-87696297:nth-child(1){margin-top:0;}\", \".nav-subcategories.jsx-87696297 li.jsx-87696297:hover{color:var(--link-hover);}\", \".subcategory-link.jsx-87696297{color:black;}\", \".subcategory-link.jsx-87696297:hover{color:var(--link-hover);}\", \".search.jsx-87696297{cursor:pointer;}\", \".search-results.jsx-87696297{font-family:Arial,sans-serif;font-size:.8rem;width:75vw;height:calc(100vh - 3rem - 7rem - 1.75rem);position:fixed;top:3rem;left:12.5vw;background-color:#fff;padding:2.25rem 2.25rem .5rem 2.25rem;z-Index:10;opacity:0;pointer-events:none;-webkit-transition:opacity 150ms ease-in;transition:opacity 150ms ease-in;box-shadow:0 0 6px 3px #ccc;}\", \".search-results.jsx-87696297 img.jsx-87696297{border:1px solid #e2e2e2;width:65px;height:65px;object-fit:fill;cursor:pointer;}\", \".search-results-button.jsx-87696297{background-color:coral;cursor:pointer;border:1px solid #aaa;color:white;font-size:.75rem;padding:0 .25rem;position:absolute;top:5px;right:5px;}\", \".search-results.jsx-87696297 select.jsx-87696297{background-color:whiteSmoke;background-image:linear-gradient(top,whiteSmoke,#f1f1f1);border:1px solid rgba(0,0,0,0.1);border-radius:2px;box-shadow:0 1px 1px rgba(0,0,0,0.1);color:#444;cursor:default;font-size:11px;font-weight:bold;height:27px;line-height:27px;max-width:90%;min-width:54px;outline:0;padding:0 28px 0 6px;position:relative;text-align:center;}\", \".search-results.jsx-87696297 option.jsx-87696297{color:#777;font-family:Arial,sans-serif;}\", \".modal-open.jsx-87696297{position:fixed;background-color:#fff;top:0;left:0;width:100vw;height:100vh;opacity:0;pointer-events:none;z-index:9;-webkit-transition:opacity 150ms ease-in;transition:opacity 150ms ease-in;}\", \".search-results-header.jsx-87696297{position:relative;margin-bottom:1.5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;color:#676767;fontSize:13px;padding:4px;}\", \".search-results-header.jsx-87696297::after{content:'';background-color:#e8e8e8;width:100%;height:1px;position:absolute;left:0;bottom:-.7rem;}\"]));\n}\n\nexport default Nav;","map":null,"metadata":{},"sourceType":"module"}