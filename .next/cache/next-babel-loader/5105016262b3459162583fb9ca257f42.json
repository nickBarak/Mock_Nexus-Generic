{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from 'next/link';\nimport AboutTheAuthor from '../../components/AboutTheAuthor';\nimport Related from '../../components/Related';\nimport CommentSection from '../../components/CommentSection';\nimport { convertDate } from '../../Functions';\nimport Layout from '../../layouts';\nimport { useEffect } from 'react';\nimport dynamic from 'next/dynamic';\n\nfunction Article({\n  article,\n  author,\n  related,\n  categories\n}) {\n  useEffect(_ => {\n    let contentDiv = document.getElementsByClassName('single-post-content')[0];\n    [...contentDiv.getElementsByTagName('p'), ...contentDiv.getElementsByTagName('span')].forEach(p => {\n      p.style.margin = '1rem 0';\n      p.style.fontFamily = 'Times New Roman, Georgia';\n      p.style.fontSize = '1.225rem';\n      p.style.lineHeight = '150%';\n    });\n    [document.getElementById('jp-relatedposts'), document.getElementsByClassName('saboxplugin-wrap')[0], document.getElementsByClassName('h5ab-print-button-container')[0]].forEach(el => {\n      if (el) el.style.display = 'none';\n    });\n    document.getElementsByClassName('single-post-content')[0].style.fontFamily = 'Times New Roman, Georgia';\n    [...document.getElementsByClassName('gallery-row')].forEach(gallery => {\n      gallery.style.display = 'grid';\n      gallery.style.gridTemplateColumns = 'repeat(3, 1fr)';\n    });\n    [...document.getElementsByClassName('tiled-gallery-caption')].forEach(caption => {\n      caption.style.backgroundColor = 'rgb(230, 230, 230, .95)';\n      caption.style.fontSize = '.75rem';\n      caption.style.width = '100%';\n      caption.style.padding = '.5rem';\n      caption.style.position = 'absolute';\n      caption.style.bottom = `3px`;\n    });\n    [...document.getElementsByClassName('tiled-gallery-item')].forEach(item => {\n      item.style.position = 'relative';\n      item.children[1].style.transform = 'scaleY(0)';\n      item.children[1].style.transition = 'transform 190ms ease-in-out';\n      item.children[1].style.transformOrigin = 'bottom';\n      item.addEventListener('mouseover', e => {\n        e.currentTarget.children[1].style.transform = 'scaleY(1)';\n      });\n      item.addEventListener('mouseout', e => {\n        e.currentTarget.children[1].style.transform = 'scaleY(0)';\n      });\n    });\n    [...document.getElementsByClassName('sd-content')[0].children].forEach(ul => {\n      ul.style.display = 'flex';\n      ul.style.justifyContent = 'space-between';\n      ul.style.width = '10rem';\n      ul.style.marginTop = '.5rem';\n    });\n    [...document.getElementsByClassName('share-icon')].forEach(icon => {\n      let [site] = [...icon.classList].filter(className => className.startsWith('share-') && className.slice(className.length - 5, className.length) !== '-icon'),\n          el = document.createElement('i'),\n          bgColor;\n      site = site.split('-')[1];\n      el.classList.add('fa');\n      el.classList.add(`fa-${site}`);\n      el.style.color = 'white';\n      el.style.borderRadius = '50%';\n      el.style.width = el.style.height = '2rem';\n      el.style.display = 'flex';\n      el.style.justifyContent = el.style.alignItems = 'center';\n      el.style.cursor = 'pointer';\n\n      switch (site) {\n        default:\n          break;\n\n        case 'facebook':\n          bgColor = 'rgba(24, 119, 242, 1)';\n          break;\n\n        case 'twitter':\n          bgColor = 'rgba(0, 172, 238, 1)';\n          break;\n\n        case 'tumblr':\n          bgColor = 'rgba(44, 71, 98, 1)';\n          break;\n\n        case 'reddit':\n          bgColor = 'rgba(255, 0, 0, 1)';\n          break;\n      }\n\n      el.style.backgroundColor = bgColor;\n      el.addEventListener('mouseover', e => {\n        e.target.style.backgroundColor = bgColor.slice(0, bgColor.length - 2) + '.75)';\n      });\n      el.addEventListener('mouseout', e => {\n        e.target.style.backgroundColor = bgColor;\n      });\n      el.addEventListener('click', _ => alert(`Imagine ${site[0].toUpperCase() + site.slice(1)} popping up`));\n      icon.replaceWith(el);\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Layout, {\n    categories: categories\n  }, __jsx(\"div\", {\n    className: \"jsx-4054325370\" + \" \" + \"article\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4054325370\" + \" \" + \"article-page-subcategory\"\n  }, article.subcategory), __jsx(\"div\", {\n    className: \"jsx-4054325370\" + \" \" + \"article-page-details\"\n  }, __jsx(\"div\", {\n    className: \"jsx-4054325370\" + \" \" + \"article-page-title\"\n  }, article.title), __jsx(\"div\", {\n    className: \"jsx-4054325370\"\n  }, (_ => {\n    let date = new Date(article.publish_date);\n    let at = date.getHours() === 0 ? '' : ` at ${date.getHours()}:${String(date.getMinutes()).length === 1 ? '0' : '' + date.getMinutes()}${date.getHours() < 12 ? date.getHours() + ' am' : 24 - date.getHours() + ' pm'}`;\n    return convertDate(article.publish_date) + at;\n  })(), \" by \", __jsx(Link, {\n    href: `/authors/${author.id}`\n  }, __jsx(\"a\", {\n    className: \"jsx-4054325370\" + \" \" + \"article-page-author-name\"\n  }, author.name)))), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: article.content\n    },\n    className: \"jsx-4054325370\" + \" \" + \"article-page-content\"\n  }), author.name && (author.biography !== 'Not available' || author.portrait !== 'Not available') && __jsx(AboutTheAuthor, {\n    author: author\n  }), __jsx(Related, {\n    articles: related\n  }), __jsx(CommentSection, {\n    comments: article.comments.sort(({\n      post_date: a\n    }, {\n      post_date: b\n    }) => a - b),\n    articleID: article.id,\n    followers: article.followers\n  }))), __jsx(_JSXStyle, {\n    id: \"4054325370\"\n  }, [\".article.jsx-4054325370{margin:.15rem 1rem;}\", \".article-page-subcategory.jsx-4054325370{position:relative;font-weight:bold;font-size:1.2rem;text-transform:uppercase;}\", \".article-page-subcategory.jsx-4054325370::before,.article-page-subcategory.jsx-4054325370::after{content:'';height:2px;width:100%;position:absolute;background-color:#ddd;left:0;}\", \".article-page-subcategory.jsx-4054325370::before{top:-5px;}\", \".article-page-subcategory.jsx-4054325370::after{bottom:-5px;}\", \".article-page-title.jsx-4054325370{font-size:2.5rem;font-weight:600;font-family:Times New Roman;margin-bottom:.65rem;}\", \".article-page-author-name.jsx-4054325370{color:black;}\", \".article-page-author-name.jsx-4054325370:hover{color:var(--link-hover);}\", \".article-page-details.jsx-4054325370{margin:2.5rem 0 3.5rem 0;}\", \".article-page-details.jsx-4054325370>div.jsx-4054325370:nth-child(2),.article-page-author-name.jsx-4054325370{font-family:Times New Roman;font-size:1.1rem;}\", \".article-page-content.jsx-4054325370{margin:0 .5rem;}\"]));\n}\n\nexport async function getStaticPaths() {\n  const queryDB = dynamic(async _ => (await import('../../db')).queryDB, {\n    loadableGenerated: {\n      webpack: () => [require.resolveWeak('../../db')],\n      modules: ['../../db']\n    }\n  });\n  let ids = await queryDB('SELECT id FROM articles'),\n      paths = ids.map(id => ({\n    params: {\n      id: String(id.id)\n    }\n  }));\n  return {\n    paths,\n    fallback: false\n  };\n}\nexport async function getStaticProps({\n  params: {\n    id\n  }\n}) {\n  const [queryDB, getCategories] = dynamic(async _ => [(await import('../../db')).queryDB, (await import('../../db')).getCategories], {\n    loadableGenerated: {\n      webpack: () => [require.resolveWeak('../../db'), require.resolveWeak('../../db')],\n      modules: ['../../db', '../../db']\n    }\n  });\n  let [article] = await queryDB('SELECT * FROM articles WHERE id = $1', [id]),\n      related = await queryDB('SELECT * FROM articles WHERE id = ANY($1)', [article.related]),\n      [author] = await queryDB('SELECT * FROM authors WHERE name = $1', [article.author.name]);\n  return {\n    props: JSON.parse(JSON.stringify({\n      article,\n      author,\n      related,\n      categories: await getCategories()\n    }))\n  };\n}\nexport default Article;","map":null,"metadata":{},"sourceType":"module"}