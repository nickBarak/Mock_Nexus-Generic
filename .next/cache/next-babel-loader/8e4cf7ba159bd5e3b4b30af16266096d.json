{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport ArticleDisplay from '../../components/ArticleDisplay';\nimport Layout from '../../layouts';\nimport { convertToPath, convertFromPath } from '../../Functions';\nimport dynamic from 'next/dynamic';\nexport async function getStaticPaths() {\n  dynamic(async _ => console.log(await import('../../db').then(({\n    queryDB\n  }) => queryDB)), {\n    loadableGenerated: {\n      webpack: () => [require.resolveWeak('../../db')],\n      modules: ['../../db']\n    }\n  });\n  const queryDB = dynamic(async _ => (await import('../../db')).queryDB, {\n    loadableGenerated: {\n      webpack: () => [require.resolveWeak('../../db')],\n      modules: ['../../db']\n    }\n  });\n  let categories = await queryDB(\"SELECT title, articles FROM categories WHERE title <> 'Labyrinth' AND title <> 'Headlines'\"),\n      paths = categories.map(({\n    title\n  }) => ({\n    params: {\n      category: convertToPath(title)\n    }\n  }));\n  return {\n    paths,\n    fallback: false\n  };\n}\nexport async function getStaticProps({\n  params: {\n    category\n  }\n}) {\n  dynamic(async _ => console.log(await import('../../db').then(({\n    queryDB\n  }) => queryDB)), {\n    loadableGenerated: {\n      webpack: () => [require.resolveWeak('../../db')],\n      modules: ['../../db']\n    }\n  });\n  const [queryDB, getCategories] = dynamic(async _ => [(await import('../../db')).queryDB, (await import('../../db')).getCategories], {\n    loadableGenerated: {\n      webpack: () => [require.resolveWeak('../../db'), require.resolveWeak('../../db')],\n      modules: ['../../db', '../../db']\n    }\n  });\n  let [articleIDs] = await queryDB('SELECT articles FROM categories WHERE title = $1', [convertFromPath(category)]),\n      articles = await queryDB('SELECT * FROM articles WHERE id = ANY($1) ORDER BY publish_date DESC', [articleIDs.articles]);\n  return {\n    props: JSON.parse(JSON.stringify({\n      heading: convertFromPath(category),\n      articles,\n      categories: await getCategories(),\n      footerData: {\n        route: '/categories/' + category,\n        page: 1,\n        highestPage: Math.ceil(articles.length / 15)\n      }\n    }))\n  };\n}\n\nfunction Category({\n  heading,\n  articles,\n  categories,\n  footerData\n}) {\n  return __jsx(Layout, {\n    categories: categories,\n    footerData: footerData\n  }, __jsx(ArticleDisplay, {\n    type: \"category\",\n    heading: heading,\n    articles: articles,\n    page: footerData.page\n  }));\n}\n\nexport default Category;","map":null,"metadata":{},"sourceType":"module"}