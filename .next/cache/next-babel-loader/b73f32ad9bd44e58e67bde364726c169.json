{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport 'isomorphic-unfetch';\nimport { useState, useEffect } from 'react';\nimport Comment from './Comment';\nimport CommentInputs from './CommentInputs';\nimport { postComment } from '../Functions';\n\nfunction CommentSection({\n  comments,\n  articleID,\n  followers\n}) {\n  const {\n    0: commentMessage,\n    1: setCommentMessage\n  } = useState(null);\n  const {\n    0: following,\n    1: setFollowing\n  } = useState(false);\n  useEffect(_ => {\n    setFollowing(followers.includes(sessionStorage.getItem('email')));\n  }, []);\n\n  function loadComments(layer) {\n    return layer.map(comment => {\n      return __jsx(React.Fragment, null, __jsx(\"li\", {\n        key: comment.id\n      }, __jsx(Comment, {\n        comment: comment,\n        followers: followers,\n        articleID: articleID\n      })), loadComments(comment.replies));\n    });\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-624796152\" + \" \" + \"comment-section\"\n  }, __jsx(\"div\", {\n    className: \"jsx-624796152\"\n  }, __jsx(\"span\", {\n    className: \"jsx-624796152\"\n  }, comments.length), __jsx(\"span\", {\n    className: \"jsx-624796152\"\n  }, \"Leave a Reply\")), __jsx(\"strong\", {\n    style: {\n      color: commentMessage === 'New user created' ? 'green' : 'red',\n      fontSize: '1.15rem'\n    },\n    className: \"jsx-624796152\"\n  }, commentMessage), __jsx(CommentInputs, {\n    setMessage: setCommentMessage,\n    articleID: articleID,\n    following: following\n  }), __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      marginTop: '3rem',\n      justifyContent: 'space-between',\n      maxWidth: '55rem'\n    },\n    className: \"jsx-624796152\"\n  }, __jsx(\"ul\", {\n    className: \"jsx-624796152\" + \" \" + \"icons\"\n  }, __jsx(\"li\", {\n    key: \"0\",\n    style: {\n      marginBottom: '.15rem',\n      marginRight: 0\n    },\n    className: \"jsx-624796152\"\n  }, __jsx(\"i\", {\n    className: \"jsx-624796152\" + \" \" + \"fas fa-align-left\"\n  }), __jsx(\"span\", {\n    style: {\n      marginLeft: '.5rem',\n      marginRight: '.2rem',\n      fontSize: '1rem'\n    },\n    className: \"jsx-624796152\"\n  }, comments.length)), __jsx(\"li\", {\n    key: \"1\",\n    className: \"jsx-624796152\"\n  }, __jsx(\"i\", {\n    className: \"jsx-624796152\" + \" \" + \"far fa-comments\"\n  }), __jsx(\"span\", {\n    style: {\n      marginBottom: '.15rem',\n      marginLeft: '.5rem',\n      fontSize: '1rem'\n    },\n    className: \"jsx-624796152\"\n  }, (_ => {\n    let commentCount = 0;\n\n    let count = level => {\n      level.forEach(({\n        replies\n      }) => commentCount++ < 0 || replies.length && count(replies));\n    };\n\n    return commentCount;\n  })())), __jsx(\"li\", {\n    style: {\n      marginLeft: '.2rem',\n      marginBottom: '.15rem'\n    },\n    key: \"2\",\n    className: \"jsx-624796152\"\n  }, __jsx(\"i\", {\n    className: \"jsx-624796152\" + \" \" + \"fas fa-rss\"\n  }), __jsx(\"span\", {\n    style: {\n      marginLeft: '.5rem',\n      fontSize: '1rem'\n    },\n    className: \"jsx-624796152\"\n  }, followers.length)), __jsx(\"li\", {\n    key: \"3\",\n    style: {\n      marginLeft: '.65rem'\n    },\n    className: \"jsx-624796152\"\n  }, __jsx(\"i\", {\n    style: {\n      cursor: 'pointer'\n    },\n    className: \"jsx-624796152\" + \" \" + \"fas fa-bolt\"\n  })), __jsx(\"li\", {\n    key: \"4\",\n    style: {\n      marginLeft: '.65rem'\n    },\n    className: \"jsx-624796152\"\n  }, __jsx(\"i\", {\n    style: {\n      cursor: 'pointer'\n    },\n    className: \"jsx-624796152\" + \" \" + \"fab fa-hotjar\"\n  }))), __jsx(\"span\", {\n    className: \"jsx-624796152\" + \" \" + \"comment-authors\"\n  }, __jsx(\"i\", {\n    className: \"jsx-624796152\" + \" \" + \"fas fa-user-circle\"\n  }), __jsx(\"span\", {\n    style: {\n      color: '#666'\n    },\n    className: \"jsx-624796152\"\n  }, (_ => {\n    let checked = [];\n\n    let count = level => {\n      level.forEach(({\n        email,\n        replies\n      }) => checked.push(email) || count(replies));\n    };\n\n    count(comments);\n    return new Set(checked).size;\n  })()))), __jsx(\"ul\", {\n    className: \"jsx-624796152\" + \" \" + \"comments\"\n  }, comments.map(comment => __jsx(\"li\", {\n    key: comment.id,\n    className: \"jsx-624796152\"\n  }, __jsx(Comment, {\n    comment: comment,\n    followers: followers,\n    articleID: articleID\n  }))))), __jsx(_JSXStyle, {\n    id: \"624796152\"\n  }, [\".comment-section.jsx-624796152>div.jsx-624796152:nth-child(1){position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:4rem;}\", \".comment-section.jsx-624796152>div.jsx-624796152:nth-child(1)::after{position:absolute;content:'';background-color:lightgray;width:100%;bottom:-1.25rem;height:1px;left:0;}\", \".comment-section.jsx-624796152>div.jsx-624796152:nth-child(1)>span.jsx-624796152{margin-right:.9rem;font-size:1.3rem;}\", \".comment-section.jsx-624796152>div.jsx-624796152:nth-child(1)>span.jsx-624796152:nth-child(1){background-color:#666;padding:.325rem 1rem;font-size:1rem;color:white;}\", \"li.jsx-624796152{margin:0 .5rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", \".comment-section.jsx-624796152>div.jsx-624796152:nth-child(2)::after{content:'';background-color:lightgray;width:100%;height:1px;position:absolute;bottom:-.95rem;}\", \".icons.jsx-624796152{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;width:9.5rem;}\", \".icons.jsx-624796152 li.jsx-624796152{margin:0 .75rem;color:#666;font-size:1.05rem;}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(1) i.jsx-624796152{-webkit-transform:rotateZ(3.15rad);-ms-transform:rotateZ(3.15rad);transform:rotateZ(3.15rad);}\", \".icons.jsx-624796152 li.jsx-624796152::before{border-radius:8px;background-color:#555;text-align:center;font-size:.75rem;padding:.65rem 0;width:14rem;left:2%;top:-160%;color:white;position:absolute;display:none;}\", \".icons.jsx-624796152 li.jsx-624796152:hover.jsx-624796152::before{display:block;}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(4) i.jsx-624796152{color:#ffba20;}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(4) i.jsx-624796152:hover{color:#ffa600;}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(5) i.jsx-624796152{color:#ff785b;}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(5) i.jsx-624796152:hover{color:#fc5844;}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(1)::before{content:'Comment threads';}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(2)::before{content:'Thread replies';}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(3)::before{content:'Followers';}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(4)::before{content:'Most reacted comment';}\", \".icons.jsx-624796152 li.jsx-624796152:nth-child(5)::before{content:'Hottest comment thread';}\", \".fa-user-circle.jsx-624796152{color:#999;font-size:1.75rem;margin-right:.6rem;}\", \".comment-authors.jsx-624796152{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}\", \".comment-authors.jsx-624796152::before{border-radius:8px;background-color:#555;text-align:center;font-size:.75rem;padding:.65rem 0;width:14rem;left:-10.8rem;top:-160%;color:white;position:absolute;display:none;content:'Comment authors';}\", \".comment-authors.jsx-624796152:hover.jsx-624796152::before{display:block;}\", \".comments.jsx-624796152{position:relative;margin-top:3rem;}\", \".comments.jsx-624796152::before{background-color:#f7f7f7;height:1.25rem;width:100%;content:'';position:absolute;top:-2rem;}\", \".comments.jsx-624796152 li.jsx-624796152{display:block;}\"]));\n}\n\nexport default CommentSection;","map":null,"metadata":{},"sourceType":"module"}