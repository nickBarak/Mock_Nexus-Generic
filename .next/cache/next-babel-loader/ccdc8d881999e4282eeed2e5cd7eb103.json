{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nicho\\\\code\\\\portfolio\\\\mock_nexus\\\\pages\\\\authors\\\\[id].js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport ArticlePreview from '../../components/ArticlePreview';\nimport Layout from \"../../layouts\";\n\nfunction Author(_ref) {\n  var _this = this;\n\n  var author = _ref.author,\n      articles = _ref.articles,\n      categories = _ref.categories;\n  return __jsx(Layout, {\n    categories: categories,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 9\n    }\n  }, __jsx(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 13\n    }\n  }, articles.slice(0, 10).map(function (article, i) {\n    return __jsx(\"li\", {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 21\n      }\n    }, \" \", __jsx(ArticlePreview, {\n      article: article,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 34\n      }\n    }), \" \");\n  })));\n}\n\n_c = Author;\nexport var __N_SSG = true;\nexport default Author;\n\nvar _c;\n\n$RefreshReg$(_c, \"Author\");","map":{"version":3,"sources":["C:/Users/nicho/code/portfolio/mock_nexus/pages/authors/[id].js"],"names":["ArticlePreview","Layout","Author","author","articles","categories","slice","map","article","i"],"mappings":";;;AACA,OAAOA,cAAP,MAA2B,iCAA3B;AACA,OAAOC,MAAP,MAAmB,eAAnB;;AAEA,SAASC,MAAT,OAAkD;AAAA;;AAAA,MAAhCC,MAAgC,QAAhCA,MAAgC;AAAA,MAAxBC,QAAwB,QAAxBA,QAAwB;AAAA,MAAdC,UAAc,QAAdA,UAAc;AAC9C,SACI,MAAC,MAAD;AAAQ,IAAA,UAAU,EAAEA,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKD,QAAQ,CAACE,KAAT,CAAe,CAAf,EAAkB,EAAlB,EAAsBC,GAAtB,CAA0B,UAACC,OAAD,EAAUC,CAAV;AAAA,WACvB;AAAI,MAAA,GAAG,EAAEA,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAa,MAAC,cAAD;AAAgB,MAAA,OAAO,EAAED,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAb,MADuB;AAAA,GAA1B,CADL,CADJ,CADJ;AASH;;KAVQN,M;;AA0BT,eAAeA,MAAf","sourcesContent":["import { queryDB, getCategories } from \"../../db\";\r\nimport ArticlePreview from '../../components/ArticlePreview';\r\nimport Layout from \"../../layouts\";\r\n\r\nfunction Author({ author, articles, categories }) {\r\n    return (\r\n        <Layout categories={categories}>\r\n            <ul>\r\n                {articles.slice(0, 10).map((article, i) =>\r\n                    <li key={i}> <ArticlePreview article={article} /> </li>\r\n                )}\r\n            </ul>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport async function getStaticPaths() {\r\n    let ids = await queryDB('SELECT id FROM authors'),\r\n        paths = ids.map(id => ({ params: { id: String(id.id) } }));\r\n\r\n    return { paths, fallback: false }\r\n}\r\n\r\nexport async function getStaticProps({ params: { id } }) {\r\n    let [author] = await queryDB('SELECT * FROM authors WHERE id = $1', [id]),\r\n        articles = await queryDB('SELECT * FROM articles WHERE author = $1', [JSON.stringify({ id: Number(id), name: author.name })]);\r\n\r\n    return { props: JSON.parse(JSON.stringify({ author, articles, categories: await getCategories() })) }\r\n}\r\n\r\nexport default Author"]},"metadata":{},"sourceType":"module"}